# 树
## 面试问题
- B+树复杂度
- 红黑树性质
- AVL树、B＋树、红黑树
- 说说最小生成树吧
- 了解什么树的数据结构，红黑树，AVL，二叉树，他们有哪些应用场景
- 红黑树是怎样的
- map和set的底层数据结构是什么，为什么使用红黑树（腾讯，头条），给我讲一下红黑树的性质（头条）
- 索引的底层实现（B+树，为何不采用红黑树，B树）
- B树和B+树具体实现
- mysql索引为什么用B+树
- 红黑树的了解（平衡树，二叉搜索树），使用场景
- 红黑树在STL上的应用
- 字典树的理解以及在统计上的应用
- 败者树


# 问题整理
## 为什么mysql数据库的索引底层用的是B+树而不是B树/红黑树
- [为什么mysql用B+树做索引而不用B-树或红黑树](https://www.cnblogs.com/loveLands/articles/11509069.html)
- [【面试被怼】什么是B树？为啥文件/数据库索引要用B树而不用二叉查找树？](https://zhuanlan.zhihu.com/p/87124501)

## 二叉搜索树（二叉查找树）、平衡二叉树（AVL树）、红黑树、B树、B+树的介绍
### 二叉搜索树
二叉查找树又叫二叉搜索树、有序二叉树或者排序二叉树，它是指一棵空树或者具有下列性质：  
- 若任意节点的左子树不为空，则左子树上所有节点的值均小于它根节点的值。
- 若任意节点的右子树不为空，则右子树上所有节点的值均大于它根节点的值。
- 任意节点的左、右子树也分别为二叉查找树。
- 没有键值相等的节点。  

### 平衡二叉树  
AVL树是二叉搜索树的改进。  

AVL 树是最早被发明的自平衡二叉查找树，AVL 树的任意一个节点对应的两棵子树的最大高度差（或者叫做平衡因子，Balance Factor）为 1，因此它也被称为高度平衡树。  

AVL 树的查找、插入和删除在平均和最坏情况下的时间复杂度都为 O(logN)。插入和删除元素可能会使平衡因子大于 1，此时需要对树进行一次或者多次旋转，从而实现树的重新平衡。  

### 红黑树
红黑树是一种自平衡二叉查找树，与普通的二叉查找树不同的是，它的每个节点都带有颜色属性，颜色有红色或黑色两种。红黑树除了具有二叉查找树的性质外，还具有以下性质：  
- 节点是黑色或者红色。
- 根是黑色的。
- 所有的叶子节点（实际上就是 NULL 指针）都是黑色的。
- 如果一个节点是红色的，那么它的两个子节点都是黑色的（也就是说，不能有两个相邻的红色节点）。
- 从任意一个节点到其每个叶子节点的所有简单路径中都包含相同数目的黑色节点。  

### B树
树和平衡二叉树稍有不同的是B树属于多叉树又名平衡多路查找树（查找路径不只两个），数据库索引技术里大量使用者B树和B+树的数据结构。
- 排序方式：所有节点关键字是按递增次序排列，并遵循左小右大原则；
- 子节点数：非叶节点的子节点数>1，且<=M ，且M>=2，空树除外（注：M阶代表一个树节点最多有多少个查找路径，M=M路,当M=2则是2叉树,M=3则是3叉）；
- 关键（key）字数：枝节点的关键字数量大于等于ceil(m/2)-1个且小于等于M-1个（注：ceil()是个朝正无穷方向取整的函数 如ceil(1.1)结果为2);
- 所有叶子节点均在同一层、叶子节点除了包含了关键字和关键字记录的指针外也有指向其子节点的指针只不过其指针地址都为null对应下图最后一层节点的空格子;

### B+树
B+树是 B-树的变体，它与 B树的不同之处在于：  
- 所有的键都会在叶子节点中出现。
- 内部节点不存储数据，叶子节点存储数据。
- 所有的叶子节点都有一个链指针，指向相邻叶子节点。

### 详细介绍
- [数据结构中的树](https://blog.nekolr.com/2019/02/19/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%AD%E7%9A%84%E6%A0%91/)
- [树,二叉树,平衡二叉树,红黑树,B树等逐步深入了解](https://www.iphpt.com/detail/136)
- [数据结构：AVL树，B树，B+树，红黑树](https://my.oschina.net/u/4384701/blog/3386641)  

## 有了二叉查找树、平衡树（AVL）为啥还需要红黑树？
### [记一次腾讯面试：有了二叉查找树、平衡树（AVL）为啥还需要红黑树？](https://zhuanlan.zhihu.com/p/72505589)  

## AVL树，红黑树，B树，B+树，Trie树都分别应用在哪些现实场景中？
### AVL树
最早的平衡二叉树之一。应用相对其他数据结构较少。windows对进程地址的管理用到了AVL树。  
### 红黑树
平衡二叉树，广泛用在C++的STL中。如map和set都是用红黑树实现的。
### B/B+树
用在磁盘文件组织、数据索引和数据库索引。  
### Trie树（字典树）
用在统计和排序大量字符串，如自动机。

### [AVL树，红黑树，B树，B+树，Trie树都分别应用在哪些现实场景中？](https://www.zhihu.com/question/30527705)

## MySQL 的索引结构为什么使用 B+树（后面学习了数据库知识后，还需要再深入了解）
### 更少的IO次数  
B+树的非叶节点只包含键，而不包含真实数据，因此每个节点存储的记录个数比B数多很多（即阶m更大），因此B+树的高度更低，访问时所需要的IO次数更少。此外，由于每个节点存储的记录数更多，所以对访问局部性原理的利用更好，缓存命中率更高。  

### 更适于范围查询  
在B树中进行范围查询时，首先找到要查找的下限，然后对B树进行中序遍历，直到找到查找的上限；而B+树的范围查询，只需要对链表进行遍历即可。  
### 更稳定的查询效率  
B树的查询时间复杂度在1到树高之间(分别对应记录在根节点和叶节点)，而B+树的查询复杂度则稳定为树高，因为所有数据都在叶节点。  

### B+树也存在劣势  
由于键会重复出现，因此会占用更多的空间。但是与带来的性能优势相比，空间劣势往往可以接受，因此B+树的在数据库中的使用比B树更加广泛。  

## map和set的底层数据结构为什么使用红黑树
STL map，nginx，linux虚拟内存管理，他们都有红黑树的应用。  

**当你对搜索的效率要求较高，并且数据经常改动的情景，比较好的选择是二叉搜索树。**  

至于，为什么不用 AVL 树作为底层实现。网上很多观点认为AVL插入删除最坏的时间复杂度会达到O(logN)，而红黑树插入删除时间复杂度是O(1)，所以选择红黑树。

但经过大量的文献以及实验证明，AVL和红黑树的性能差异非常小。详见下。  

## 平衡二叉树（AVL树）、红黑树比较
### [关于AVL树和红黑树的一点看法](https://zhuanlan.zhihu.com/p/93369069)

## 红黑树有哪些性质
红黑树的5条性质：  
- 每个节点不是红色就是黑色的。
- 根结点是黑色的。
- 每个叶节点(nil)是黑色的，实际上nil只有一个。
- 如果一个节点是红色的，则它的两个子节点都是黑色的。
- 对每个节点，从该节点到其所有后代叶结点的简单路径上，均包含相同数目的黑色节点。

## 红黑树各种操作的时间复杂度是多少？
红黑树的查找、插入、删除的时间复杂度最坏为O(logN)。  
- [数据结构和算法（十一）：红黑树](https://zhuanlan.zhihu.com/p/37470948)
- [教你透彻了解红黑树](https://github.com/julycoding/The-Art-Of-Programming-By-July/blob/master/ebook/zh/03.01.md)
## 构建一棵节点个数为 n 的红黑树，时间复杂度是多少？
O(NlogN)。  

插入一个元素到红黑树的时间为O(logN)，其中N为当前红黑树的元素个数，因此，采用插入方式构建元素个数为N的红黑树的时间复杂度为:
```CPP
log(1) + log(2) + log(N-1) = log((N-1)!) = Nlog(N)
```
## 红黑树与哈希表在不同应该场景的选择

- [C++ STL中的map用红黑树实现，搜索效率是O(lgN),为什么不像python一样用散列表从而获得常数级搜索效率呢？](https://www.zhihu.com/question/24506208)
- [面试中红黑树常考问题](https://www.cnblogs.com/bethunebtj/articles/4853480.html)

## 红黑树的实现（github上可以搜到很多）
### [红黑树的实现](https://github.com/william-zk/RB_Tree)

## 胜者树与败者树，以及多路归并排序的时候，为什么要采用败者树？
### [胜者树和败者树](https://www.cnblogs.com/qianye/archive/2012/11/25/2787923.html)
### [多路归并排序的时候，为什么要采用败者树？](https://www.zhihu.com/question/35144290)

## 字典树的理解以及在统计上的应用
最后再总结，并看看源码
